{% extends '../base.html' %}
{% block content %}
{% include './navbar.html' %}
{% include './sidebar.html' %}

<div class="p-8 sm:ml-64 mt-14">
        <div class="container mx-auto p-4">
            <div class="container mx-auto p-4">
                <header class="flex justify-between items-center mb-8">
                    <h1 class="text-2xl font-bold">Language Progress</h1>
                    <nav>
                        <a href="#" class="mx-2">Progress</a>
                        <a href="#" class="mx-2">Decks</a>
                        <a href="#" class="mx-2">Wordlist</a>
                        <select class="bg-white-800 rounded">
                            <option>German</option>
                            <option>French</option>
                            <option>Spanish</option>
                        </select>
                    </nav>
                </header>
        
                <main class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <section class="p-4 rounded border border-green-700">
                        <h2 class="text-xl mb-4">Today</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h3>Accuracy</h3>
                                <p class="text-3xl font-bold">79%</p>
                                <p class="text-sm text-green-400">Average: 79% â†‘</p>
                            </div>
                            <div>
                                <h3>New words learned</h3>
                                <p class="text-3xl font-bold">15</p>
                                <p class="text-sm text-yellow-400">Your average: 22 â†“</p>
                            </div>
                            <div>
                                <h3>Consistency</h3>
                                <p class="text-3xl font-bold">27/30</p>
                                <p class="text-sm text-yellow-400">Average: 26 days â†“</p>
                            </div>
                            <div>
                                <h3>Answered cards</h3>
                                <p class="text-3xl font-bold">212</p>
                                <p class="text-sm text-green-400">Average: 200 cards â†‘</p>
                            </div>
                        </div>
                    </section>
        
                    <section class=" p-4 rounded border border-green-700">
                        <h2 class="text-xl mb-4">All time</h2>
                        <div>
                            <h3>Words learned</h3>
                            <p class="text-3xl font-bold">2455</p>
                        </div>
                    </section>
        
                    <section class=" p-4 rounded border border-green-700">
                        <h2 class="text-xl mb-4">Leaderboard</h2>
                        <ul>
                            <li class="flex justify-between items-center mb-2">
                                <span>ðŸ¥‡ Alex</span>
                                <span>282 words</span>
                            </li>
                            <li class="flex justify-between items-center mb-2">
                                <span>ðŸ¥ˆ Riley</span>
                                <span>250 words</span>
                            </li>
                            <li class="flex justify-between items-center mb-2">
                                <span>ðŸ¥‰ Lindie</span>
                                <span>88 words</span>
                            </li>
                        </ul>
                    </section>
                </main>
    
        
        
                <main class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Main content sections remain unchanged -->
                </main>
    
                <section class="mt-8">
                    <h2 class="text-xl mb-4">Active days</h2>
                    <div class="relative">
                        <div id="monthLabels" class="absolute top-0 left-0 w-full flex justify-between text-xs text-black mb-1">
                            <!-- Month labels will be inserted here by JavaScript -->
                        </div>
                        <div class="flex">
                            <div id="dayLabels" class="flex flex-col mr-4 pt-6  text-black">
                                <!-- Day labels will be inserted here by JavaScript -->
                            </div>
                            <div class="flex-grow">
                                <div id="calendar" class="grid gap-[3px] mt-6 text-black">
                                    <!-- Calendar cells will be inserted here by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mt-4">
                        <p><span id="activeDaysCount">0</span> active days in <span id="currentYear">2022</span></p>
                        <div class="flex items-center">
                            <button id="prevYear" class="bg-green-900 text-white px-3 py-1 rounded mr-2">&lt;</button>
                            <span id="yearDisplay" class="bg-green-900 text-white px-3 py-1 rounded">2022</span>
                            <button id="nextYear" class="bg-green-900 text-white px-3 py-1 rounded ml-2">&gt;</button>
                        </div>
                        <div class="flex items-center">
                            <span class="mr-2">Less</span>
                            <div class="flex">
                                <div class="w-4 h-4 bg-green-900 rounded-sm ml-2"></div>
                                <div class="w-4 h-4 bg-green-700 rounded-sm ml-2"></div>
                                <div class="w-4 h-4 bg-green-500 rounded-sm ml-2"></div>
                                <div class="w-4 h-4 bg-green-300 rounded-sm ml-2"></div>
                            </div>
                            <span class="ml-2">More</span>
                        </div>
                    </div>
                </section>
          
    </div>
</div>

<style>
    #calendar {
        grid-template-columns: repeat(53, minmax(0, 1fr));
        padding: 3px;
        border-radius: 4px;
        width: 1125px;
        height: 145px;
    }
    .calendar-cell {
        width: 14px;
        height: 14px;
        border-radius: 2px;
    }
    #dayLabels div {
        height: 20px;
        line-height: 50px;
        font-size: 10px;
        margin-right: 2px;
    }
</style>

<script>
    const calendar = document.getElementById('calendar');
    const monthLabels = document.getElementById('monthLabels');
    const dayLabels = document.getElementById('dayLabels');
    const activeDaysCount = document.getElementById('activeDaysCount');
    const currentYearSpan = document.getElementById('currentYear');
    const yearDisplay = document.getElementById('yearDisplay');
    const prevYearBtn = document.getElementById('prevYear');
    const nextYearBtn = document.getElementById('nextYear');

    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', "Sun"];
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    let currentYear = 2022;

    function createCalendar(year) {
        calendar.innerHTML = '';
        monthLabels.innerHTML = '';
        dayLabels.innerHTML = '';

        // Add month labels
        months.forEach(month => {
            const monthSpan = document.createElement('span');
            monthSpan.textContent = month;
            monthSpan.className = 'inline-block text-center text-sm text-black w-[calc(100%/12)]';
            monthLabels.appendChild(monthSpan);
        });

        // Add day labels
        days.forEach(day => {
            const dayLabel = document.createElement('div');
            dayLabel.className = 'text-xl text-black h-3 flex items-center justify-end pr-2';
            dayLabel.textContent = day;
            dayLabels.appendChild(dayLabel);
        });

        // Add cells for each day of the year
        const date = new Date(year, 0, 1);
        const endDate = new Date(year + 1, 0, 1);

        // Fill in the days before the first day of the year
        const firstDayOfWeek = date.getDay();
        for (let i = 0; i < (firstDayOfWeek + 6) % 7; i++) {
            const cell = document.createElement('div');
            cell.className = 'calendar-cell';
            setRandomColor(cell);
            calendar.appendChild(cell);
        }

        let activeDays = 0;
        while (date < endDate) {
            const cell = document.createElement('div');
            cell.className = 'calendar-cell';
            setRandomColor(cell);
            calendar.appendChild(cell);
            date.setDate(date.getDate() + 1);
            activeDays++;
        }

        // Fill in the days after the last day of the year
        const lastDayOfWeek = (endDate.getDay() + 6) % 7;
        for (let i = 0; i < (7 - lastDayOfWeek) % 7; i++) {
            const cell = document.createElement('div');
            cell.className = 'calendar-cell';
            setRandomColor(cell);
            calendar.appendChild(cell);
        }

        activeDaysCount.textContent = activeDays;
        updateYearDisplay();
    }

    function setRandomColor(cell) {
        const colors = ['bg-green-300', 'bg-green-500', 'bg-green-700', 'bg-green-900'];
        const randomColor = colors[Math.floor(Math.random() * colors.length)];
        cell.classList.add(randomColor);
    }

    function updateYearDisplay() {
        yearDisplay.textContent = currentYear;
        currentYearSpan.textContent = currentYear;
    }

    prevYearBtn.addEventListener('click', () => {
        currentYear--;
        createCalendar(currentYear);
    });

    nextYearBtn.addEventListener('click', () => {
        currentYear++;
        createCalendar(currentYear);
    });

    createCalendar(currentYear);
</script>

{% endblock %}